<project name="RateMyClassmate" default="war" basedir="..">
  <property file="ant/build.properties"/>

  <path id="classpath">
    <fileset dir="${lib.dir}" includes="mysql-connector-java-5.1.33-bin.jar"/>
    <fileset dir="${lib.dir}" includes="servlet-api.jar" />
  </path>

  <target name="clean" description="Delete library and class directories">
    <echo>Cleaning the ${build.dir}</echo>
    <delete dir="${build.dir}"/>
  </target>

  <target name="init" depends="clean">
      <echo>Creating the build directory ${build.dir}</echo>
      <mkdir dir="${build.dir}/WEB-INF/classes"/>
      <mkdir dir="${build.dir}/WEB-INF/lib"/>
  </target>

  <target name="compile" depends="init" description="Compile the hello program">
    <echo>Compile the source files</echo>

    <javac srcdir="${source.dir}" destdir="${build.dir}/WEB-INF/classes">
      <classpath refid="classpath"/> 
    </javac>
  </target>

  <target name="copy" depends="compile">
    <copy todir="${build.dir}/WEB-INF">
      <fileset dir="${conf.dir}"/>
    </copy>
    <copy todir="${build.dir}">
      <fileset dir="${web.dir}"/>
    </copy>
    <copy todir="${build.dir}/WEB-INF/lib">
      <fileset dir="${lib.dir}"/>
    </copy>
  </target>

  <target name="war" depends="copy">
    <echo>Building the war file</echo>
    <war destfile="${dist.dir}/${project.name}.war" webxml="${build.dir}/WEB-INF/web.xml">
      <fileset dir="${build.dir}"/>
    </war>
  </target>

</project>
